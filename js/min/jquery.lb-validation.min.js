/* LB Validation Plugin, v. 0.2 (1/27/12) */(function(e){"use strict";var t={pluginName:"lb_validation",classes:{errorClass:"error",successClass:"success",warningClass:"warning",messageClass:"input-alert",requiredClass:"required"},emailMsg:"A valid email address is required.",emailConfirmMsg:"Check that your email addresses match.",invalidMsg:"This field is required.",totalsMsg:"Check that your totals don't exceed the limit",telMsg:"Make sure you've entered a valid phone number.",searchMsg:"Please input a search term.",numberMsg:"Enter a valid number.",errorMsg:"There was an error.",passwordMsg:"Your password must match the criteria.",passwordConfirmMsg:"Be sure that your passwords match.",radioMsg:"Please choose one of the options above.",checkboxMsg:"This field is required.",selectMsg:"Select an option.",types:{email:/^([a-zA-Z0-9._%+\-])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/,tel:/^((([0-9]{1})*[\- .(]*([0-9]{3})[\- .)]*[0-9]{3}[\- .]*[0-9]{4})+)*$/,number:/^[0-9]*/},fieldsToCheck:"input[type='text'], input[type='email'], input[type='search'], input[type='tel'], input[type='url'], input[type='number'], input[type='password'], input[type='checkbox'], input[type='radio'], textarea, select",errorReport:function(t){var r=e(this),i=t;i.each(function(){var t=e(this);n.removeMessage.call(r,t);n.addMessage.call(r,t)})},ajaxSubmit:null},n={init:function(r){return this.each(function(){var i=e(this),s=e.extend(!0,{},t),u=e.extend(!0,s,r),a=i.find(u.fieldsToCheck),f={email:u.emailMsg,"email-confirm":u.emailConfirmMsg,password:u.passwordMsg,"password-confirm":u.passwordConfirmMsg,tel:u.telMsg,search:u.searchMsg,text:u.invalidMsg,number:u.numberMsg,"text-totals":u.totalsMsg,textarea:u.invalidMsg,checkbox:u.checkboxMsg,radio:u.radioMsg,select:u.selectMsg,"default":u.errorMsg},l={messages:f,fieldsToCheck:u.fieldsToCheck,types:u.types,classes:u.classes,errorReport:u.errorReport,ajaxSubmit:u.ajaxSubmit};i.attr("novalidate",!0).data("lbValidation",l);a.on("change",function(){var t=n.validate.call(i,e(this)),r=[],s=[];t?s.push(e(this)):r.push(e(this));u.errorReport.call(i,e(this))});i.submit(function(){return n.formSubmit.call(i,a)})})},validate:function(t){var n=t,r=n.val(),i=n.attr("type"),s=n.attr("name"),o=n.attr("pattern"),u,a,f,l=!0,c=e(this),h=c.data("lbValidation"),p=n.attr("data-validate-confirm"),d=e("#"+p);if(n.prop("disabled")!==!0)if(e.trim(r)==="")!n.attr("required")||(l=!1);else if(!o)if(!p){if(i==="checkbox"||i==="radio"){if(!!n.attr("required")){u=c.find("input[name='"+s+"']");a=!1;u.each(function(){e(this).is(":checked")&&(a=!0)});a===!1&&(l=!1)}}else if(!!i&&!!h.types[i]){f=h.types[i];f.test(r)||(l=!1)}}else r!==d.val()&&(l=!1);else{f=new RegExp(o);f.test(r)?!p||r!==d.val()&&(l=!1):l=!1}n.data("verdict",l);return l},formSubmit:function(t){var r=e(this),i=r.data("lbValidation"),s=t,o=[],u;s.each(function(){var t=n.validate.call(r,e(this));t||o.push(e(this))});i.errorReport.call(r,s);if(o.length>0){u=r.find("."+i.classes.errorClass+"."+i.classes.messageClass).first().prev().offset();e("html, body").animate({scrollTop:u.top-100},500);return!1}if(typeof i.ajaxSubmit=="function"){i.ajaxSubmit.call(r);return!1}return!0},addMessage:function(t){var n=e(this),r=n.data("lbValidation"),i=t,s=i.data("verdict"),o=i.attr("type"),u,a,f,l,c,h,p,d,v;if(!o||o==="select-one")i.is("select")?o="select":i.is("textarea")?o="textarea":o="text";if(o==="checkbox"||o==="radio"){u=i.closest("ul");a=u.closest("fieldset");f=u.find('label[for="'+i.attr("id")+'"]');l=u.attr("id");c=a.find('[data-for="'+l+'"]');h=i.attr("name");p=n.find("input[name='"+h+"']");d=!1;p.each(function(){e(this).is(":checked")&&(d=!0)});if(!s){c.addClass(r.classes.errorClass);u.after('<b class="bubble '+r.classes.errorClass+" "+r.classes.messageClass+'">'+r.messages[o]+"</b>")}else s===!0&&f.addClass(r.classes.successClass)}else{v=i.closest("label");if(!s){v.addClass(r.classes.errorClass);i.after('<b class="bubble '+r.classes.errorClass+" "+r.classes.messageClass+'">'+r.messages[o]+"</b>")}else e.trim(i.val())!==""&&v.addClass(r.classes.successClass)}},removeMessage:function(t){var n=e(this),r=n.data("lbValidation"),i=t,s=i.attr("type"),o,u,a,f,l,c,h;if(s==="checkbox"||s==="radio"){o=i.closest("ul");u=o.closest("fieldset");a=o.find('label[for="'+i.attr("id")+'"]');f=o.attr("id");l=u.find('[data-for="'+f+'"]');c=i.attr("name");l.removeClass(r.classes.errorClass);a.removeClass(r.classes.successClass);o.next("."+r.classes.errorClass+"."+r.classes.messageClass).remove()}else{h=i.closest("label");h.removeClass(r.classes.successClass).removeClass(r.classes.errorClass);i.next("."+r.classes.errorClass+"."+r.classes.messageClass).remove()}}};e.fn[t.pluginName]=function(e){if(n[e])return n[e].apply(this,Array.prototype.slice.call(arguments,1));if(!e||typeof e=="object")return n.init.apply(this,arguments);console.log(t.pluginName+": Invalid method passed")}})(jQuery);