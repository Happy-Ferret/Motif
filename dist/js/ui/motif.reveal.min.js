/*!
 * Motif Reveal v2.0.1
 * Show and hide things with class(es)
 * http://getmotif.com
 * 
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 */
!function(a,b,c,d){"use strict";var e=function(b){this.$elem=a(b),this.elem=this.$elem[0]},f=a(c);e.counter=0,e.animationFrame="function"==typeof b.requestAnimFrame?!0:!1,e.prototype={defaults:{trigger:"click",type:"default",target:"data-reveal",activeClass:"is-current",visitedClass:"is-visited",hoverIntent:null,onInit:null,beforeShow:null,beforeHide:null,onShow:null,onHide:null},newReferenceTarget:function(a){return{elem:a,targets:[],fors:[],hide:[],current:!1}},newReferenceGroup:function(){return{type:this.options.type,triggers:[]}},init:function(a){return this.initVars.call(this,a),this.createReference.call(this),this.bindCallbacks.call(this),this.bindTrigger.call(this),this.bindTargets.call(this),this.initTrigger.call(this),e.counter+=1,f.trigger("reveal/"+this.identity+"/init"),this},initVars:function(b){this.identity=this.$elem.attr("id")||"reveal-target-"+e.counter,this.group=this.$elem.attr("data-reveal-group")||!1,this.reference=!1,this.config=b,this.metadata=this.$elem.data("reveal-options"),this.options=a.extend(!0,{},this.defaults,this.config,this.metadata)},createReference:function(){b.Reveal||(b.Reveal={triggers:{},groups:{},queue:[]})},bindCallbacks:function(){var a=this;"function"==typeof a.options.onInit&&f.on("reveal/"+a.identity+"/init",function(){a.options.onInit.call(a,a.$elem)}),"function"==typeof a.options.beforeShow&&f.on("reveal/"+a.identity+"/before/show",function(){a.options.beforeShow.call(a,a.$elem)}),"function"==typeof a.options.onShow&&f.on("reveal/"+a.identity+"/after/show",function(){a.options.onShow.call(a,a.$elem)}),"function"==typeof a.options.beforeHide&&f.on("reveal/"+a.identity+"/before/hide",function(){a.options.beforeHide.call(a,a.$elem)}),"function"==typeof a.options.onHide&&f.on("reveal/"+a.identity+"/after/hide",function(){a.options.onHide.call(a,a.$elem)})},bindTrigger:function(){var b=this;"click"===b.options.trigger?b.$elem.on("click",function(){return b.processTrigger.call(b),!1}):"hover"===b.options.trigger&&(a.fn.hoverIntent&&b.options.hoverIntent?b.$elem.hoverIntent({sensitivity:b.options.hoverIntent.sensitivity,interval:b.options.hoverIntent.interval,over:function(){b.processTrigger.call(b)},timeout:b.options.hoverIntent.timeout,out:function(){b.processTrigger.call(b)}}):b.$elem.on({mouseenter:function(){b.processTrigger.call(b)},mouseleave:function(){b.processTrigger.call(b)}}))},processTrigger:function(){if(this.reference.current===!0){if("radio"===this.options.type)return;this.unpublish.call(this)}else this.publish.call(this)},publish:function(){var a,c,d=this;if(d.group&&"default"!==d.options.type){a=d.getCurrent.call(d,b.Reveal.groups[d.group].triggers);for(c in a)d.unpublish.call(d,a[c])}f.trigger("reveal/"+this.identity+"/show")},unpublish:function(a){var b=a||this.identity;f.trigger("reveal/"+b+"/hide")},bindTargets:function(){var a=this;f.on("reveal/"+a.identity+"/show",function(){f.trigger("reveal/"+a.identity+"/before/show"),a.makeCurrent.call(a),a.showTrigger.call(a),a.showTargets.call(a),a.showFors.call(a),f.trigger("reveal/"+a.identity+"/after/show")}),f.on("reveal/"+a.identity+"/hide",function(){f.trigger("reveal/"+a.identity+"/before/hide"),a.unmakeCurrent.call(a),a.hideTrigger.call(a),a.hideTargets.call(a),a.hideFors.call(a),f.trigger("reveal/"+a.identity+"/after/hide")})},initCurrent:function(){"true"===this.$elem.attr("data-reveal-current")&&this.setCurrent()},setCurrent:function(){this.group?b.Reveal.queue.push(this.identity):(this.makeCurrent(),this.publish())},executeQueue:function(){var c=b.Reveal.queue;c.length&&a.each(c,function(a){f.trigger("reveal/"+c[a]+"/show")}),b.Reveal.queue=[],f.trigger("reveal/queue/done")},makeCurrent:function(){this.updateReference.call(this,{current:!0})},unmakeCurrent:function(){this.updateReference.call(this,{current:!1})},getCurrent:function(c){var d=b.Reveal.triggers,e=[];return a.each(c,function(a){d[c[a]].current&&e.push(c[a])}),e},initTrigger:function(){var a=this;this.updateReference.call(this,{targets:this.gatherTargets.call(this),fors:this.gatherForTriggers.call(this),hide:this.gatherHideTriggers.call(this)}),a.initCurrent.call(a)},gatherTargets:function(){var b,c;return"function"==typeof this.options.target?c=this.options.target.call(this):(b=this.$elem.attr(this.options.target).split(" "),c=[],a.each(b,function(d){var e=a("#"+b[d]);e.length||(e=function(){var c=a("#"+b[d]);return c.length?c:!1}),c.push(e)})),c},gatherForTriggers:function(){var b=this,c=a("[data-reveal-for='"+this.identity+"']"),d=[];return a.each(c,function(a){b.bindFors.call(b,c[a]),d.push(c[a])}),d},bindFors:function(b){var c=this;a(b).on("click",function(){return c.$elem.trigger("click"),!1})},gatherHideTriggers:function(){var b=this,c=a("[data-reveal-hide='"+this.identity+"']"),d=[];return a.each(c,function(a){b.bindHides.call(b,c[a]),d.push(c[a])}),d},bindHides:function(b){var c=this;a(b).on("click",function(){return c.reference.current&&"radio"!==c.options.type&&c.$elem.trigger("click"),!1})},gatherGroup:function(){var b=this.$elem.data("reveal-group");this.$group=b?a("[data-reveal-group='"+b+"']"):!1},addClass:function(a,b){e.animationFrame?requestAnimFrame(function(){a.addClass(b)}):a.addClass(b)},removeClass:function(a,b){e.animationFrame?requestAnimFrame(function(){a.removeClass(b)}):a.removeClass(b)},show:function(a){this.addClass(a,this.options.activeClass)},showTargets:function(){var b=this,c=b.reference.targets;a.each(c,function(){b.show.call(b,this)})},showFors:function(){var b=this,c=b.reference.fors;a.each(c,function(){b.show.call(b,a(this))})},showTrigger:function(){this.show.call(this,this.$elem)},hide:function(a){this.removeClass(a,this.options.activeClass),a.hasClass(this.options.visitedClass)||this.addClass(a,this.options.visitedClass)},hideTargets:function(){var b=this,c=b.reference.targets;a.each(c,function(){b.hide.call(b,this)})},hideFors:function(){var b=this,c=b.reference.fors;a.each(c,function(){b.hide.call(b,a(this))})},hideTrigger:function(){this.hide.call(this,this.$elem)},updateReference:function(c){var d=this,e=c||{},f=b.Reveal,g=d.group?f.groups[d.group]:!1,h=f.triggers[d.identity];return d.group&&(g?-1===a.inArray(d.identity,g.triggers)&&g.triggers.push(d.identity):(f.groups[d.group]=d.newReferenceGroup.call(d),f.groups[d.group].triggers.push(d.identity))),h?a.extend(!0,h,e):f.triggers[this.identity]=a.extend(!0,{},this.newReferenceTarget.call(this,this.$elem),e),this.reference=f.triggers[this.identity],this.reference}},e.defaults=e.prototype.defaults,d.apps.Reveal=e,a.fn.reveal=function(b){var c,d=this;return d.length?d.each(function(f){var g=a.data(this,"reveal");if(g)if("undefined"==typeof b||"object"==typeof b)g.init(b);else{if("string"==typeof arg&&"function"==typeof g[arg])return c=Array.prototype.slice.call(arguments,1),g[b].apply(g,c);console.log("Reveal: Method "+arg+" does not exist on jQuery.")}else g=a.data(this,"reveal",new e(this).init(b));d.length-1===f&&g.executeQueue.call(d)}):void 0}}(jQuery,window,document,window.Motif=window.Motif||{utils:{},apps:{}});