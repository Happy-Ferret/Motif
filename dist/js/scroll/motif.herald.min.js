/*!
 * Motif Herald v0.2.1
 * Fire off events depending on scroll position.
 * http://getmotif.com
 * 
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 */
!function(a,b,c,d){"use strict";var e=function(b){this.$elem=a(b),this.elem=this.$elem[0]};e.prototype={defaults:{window:a(b),onInit:null,events:[]},initVars:function(b){this.config=b,this.metadata=this.$elem.data("herald-options"),this.options=a.extend(!0,{},this.defaults,this.config,this.metadata),this.$window=this.options.window,this.oldPosition=this.$window.scrollTop()},init:function(a){return this.$elem.length?(this.initVars.call(this,a),this.bind.call(this),this):void 0},bind:function(){var a=this;a.$window.on("scroll.herald",function(){a.testEvents.call(a)}).on("resize.herald",function(){a.refresh.call(a)}),a.refresh.call(a)},refresh:function(){this.oldPosition>0&&(this.oldPosition=0,this.$window.trigger("scroll.herald"))},testEvents:function(){var a,b,c=this,d=c.options.events,e=!1;for(c.currentPosition=c.$window.scrollTop(),b=0;b<d.length;b+=1)a=c.triggerType.call(c,d[b]),("undefined"==typeof d[b].fired||!d[b].fired||d[b].repeat)&&(e=c.testTrigger.call(c,a,b),e&&c.triggerEvent.call(c,b));c.oldPosition=c.currentPosition},triggerType:function(a){return"function"==typeof a.trigger?a.trigger.call(this):a.trigger},testTrigger:function(a){return a<=this.currentPosition&&a>=this.oldPosition||a>=this.currentPosition&&a<=this.oldPosition?!0:!1},triggerEvent:function(a){var b=this.options.events,c=b[a];c.event.call(this,this.getDirection.call(this)),c.fired=!0,c.repeat||b.splice(a,1)},getDirection:function(a,b){var c,d=a||this.oldPosition,e=b||this.currentPosition;return e>d?c="down":d>e&&(c="up"),c}},e.defaults=e.prototype.defaults,d.apps.Herald=e}(jQuery,window,document,window.Motif=window.Motif||{utils:{},apps:{}}),$.createPlugin("herald",window.Motif.apps.Herald);