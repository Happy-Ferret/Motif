/*!
 * Motif Background Size v0.1.0 (2013-06-07)
 * Mimics the `background-size: cover` CSS property. Great for IE8 fallbacks.
 * http://getmotif.com
 *
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 */
!function(a,b){"use strict";var c={pluginName:"backgroundSize",loadedClass:"fake-bg-is-ready",wrapperClass:"fake-bg-wrapper",imageClass:"fake-bg-image",leftOffsetClass:"fake-bg-left-offset",topOffsetClass:"fake-bg-top-offset",onInit:null,onImageLoad:null,onResize:null},d={init:function(e){return this.each(function(){var f,g=a(this),h=a.extend(!0,{},c,e),i=a(b),j=g.data(),k={originalData:j,loadedClass:h.loadedClass,wrapperClass:h.wrapperClass,imageClass:h.imageClass,leftOffsetClass:h.leftOffsetClass,topOffsetClass:h.topOffsetClass,onInit:h.onInit,onImageLoad:h.onImageLoad,onResize:h.onResize};g.data("backgroundSizeSettings",k),f=d.createImage(g),i.on("resize",function(){d.sizeImage(f,g)}),"function"==typeof h.onInit&&h.onInit(g)})},createImage:function(b){var c,e=b.data("backgroundSizeSettings"),f=b.attr("data-img"),g=a("<div class='"+e.wrapperClass+"' />"),h=new RegExp(/^url\((['"]?)(.*)\1\)$/);return f||(f=b.css("background-image"),f=h.exec(f),f=f?f[2]:"",b.css("background-image","none")),c=a("<img class='"+e.imageClass+"' src='"+f+"'>").load(function(){d.sizeImage(c,b,function(){d.loadImage(c,b)})}),g.append(c).appendTo(b),c},sizeImage:function(a,b,c){var d,e,f=b.data("backgroundSizeSettings"),g=b.outerWidth(),h=b.outerHeight(),i=g/h,j=a.width()/a.height(),k=a.parent();j>i?(k.removeClass(f.topOffsetClass).addClass(f.leftOffsetClass),d=Math.floor((h*j-g)/2),a.css({"margin-bottom":0,"margin-left":-d})):(k.removeClass(f.leftOffsetClass).addClass(f.topOffsetClass),e=Math.floor((g/j-h)/2),a.css({"margin-bottom":-e,"margin-left":0})),"function"==typeof f.onResize&&f.onResize.call(b,a),"function"==typeof c&&c.call(b,a)},loadImage:function(a,b){var c=b.data("backgroundSizeSettings");a.hide(),"function"==typeof c.onImageLoad&&c.onImageLoad.call(b,a),b.addClass(c.loadedClass),a.fadeIn(500)}};a.fn[c.pluginName]=function(a){return d[a]?d[a].apply(this,Array.prototype.slice.call(arguments,1)):a&&"object"!=typeof a?void console.log(c.pluginName+": Invalid method passed"):d.init.apply(this,arguments)}}(jQuery,window);